<!-- MAIN CONTENT -->
<div id="content">
    <!-- widget grid -->
    <section widget-grid id="widget-grid">
        <div class="row">
            <article class="col-sm-12">
                <div jarvis-widget id="normal-table-widget" data-widget-color="blueDark" data-widget-editbutton="false" data-widget-deletebutton="false">
                    <header>
                        <span class="widget-icon"> <i class="fa fa-upload "></i> </span>
                        <h2>{{getWord('Import Data')}}</h2>
                        <div class="widget-toolbar">
                            <span class="jarviswidget-ctrls" ng-click="$dismiss()"> <i class="fa fa-close"></i> </span>
                        </div>
                    </header>
                    <div>
                        <form ng-app="fileUpload" name="uploadForm">
                            <fieldset>
                                <div class="form-group">
                                    <label class="control-label"><strong>{{getWord("Select File")}}</strong></label>
                                    <div>
                                        <input class="form-control" type="file" ngf-select="selectFile()" ng-model="file" name="file"
                                               accept=".txt, .csv, .xls, .xlsx, .pak" ngf-max-size="20MB" required
                                               ngf-model-invalid="errorFile">
                                        <i class="text-danger" ng-show="uploadForm.file.$error.required">*{{getWord("Required")}}</i><br>
                                        <i class="text-danger" ng-show="uploadForm.file.$error.maxSize">
                                            File too large {{errorFile.size / 1000000|number:1}}MB: max 20M
                                        </i>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label"><strong>{{getWord("Select Script")}}</strong></label>
                                    <div>
                                        <select class="form-control" name="importScript" required
                                                ng-init="selectedScript = scripts[0]"
                                                ng-model="selectedScript"
                                                ng-options="script.name for script in scripts"></select>
                                        <i class="text-danger" ng-show="uploadForm.importScript.$error.required">*{{getWord("Required")}}</i>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-primary" ng-click="uploadFile(file)" button-spinner="loading" ng-disabled="!uploadForm.$valid || loading">{{getWord("Submit")}}</button>
                                    <button class="btn btn-default" ng-click="closeModal()">{{getWord("Cancel")}}</button>
                                    <span class="progress text-warning" ng-show="file.progress >= 0">
                                        <div style="width:{{file.progress}}%" ng-bind="file.progress + '%'"></div>
                                    </span>
                                    <span class="text-success" ng-show="file.result">{{getWord("Import Successful")}}</span>
                                    <span class="text-danger" ng-show="errorMsg">{{errorMsg}}</span>
                                </div>
                            </fieldset>
                        </form>
                    </div>
            </article>
        </div>
    </section>
</div>
